<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>게임 스토리 (GameStory) - 게임 시나리오 작가 매칭 플랫폼</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <!-- Landing Page -->
    <div id="landing" class="page active">
        <div class="gnb">
            <div class="logo" onclick="showPage('landing')">📖 게임 스토리</div>
            <div class="gnb-right">
                <span id="userNameDisplay" style="margin-right: 10px; color: #666;"></span>
                <span id="userRoleDisplay" class="role-badge" style="display: none;"></span>
                <a class="gnb-link" id="makersLink" onclick="showPage('makers')">팀원 찾기</a>
                <a class="gnb-link" onclick="showPage('dashboard')">내 대시보드</a>
                <a class="gnb-link" id="loginBtn" onclick="showLoginModal()">로그인</a>
            </div>
        </div>
        
        <div class="landing">
            <div class="landing-content">
                <h1>게임 시나리오를 위한 작가 매칭 플랫폼</h1>
                <p>당신의 이야기로 게임 세계를 만들어보세요</p>
                
                <button class="btn-primary" onclick="showPage('create')">
                    시나리오 의뢰하기
                </button>
                
                <div class="search-section">
                    <div class="search-row">
                        <select class="search-select" id="searchGenre">
                            <option value="">모든 장르</option>
                            <option value="RPG">RPG</option>
                            <option value="비주얼 노벨">비주얼 노벨</option>
                            <option value="퍼즐">퍼즐/전략</option>
                            <option value="어드벤처">어드벤처</option>
                            <option value="시뮬레이션">시뮬레이션</option>
                        </select>
                        <input type="text" class="search-input" id="searchKeyword" placeholder="키워드로 검색 (예: 판타지, RPG, 로맨스...)" onkeypress="if(event.key==='Enter') searchProjects()">
                        <button class="search-btn" onclick="searchProjects()">검색</button>
                    </div>
                </div>
                
                <div class="projects-grid">
                    <!-- JavaScript로 동적 렌더링 -->
                </div>
            </div>
        </div>
    </div>
    
    <!-- Detail Page -->
    <div id="detail" class="page detail-page">
        <div class="gnb">
            <div class="logo" onclick="showPage('landing')">📖 게임 스토리</div>
            <div class="gnb-right">
                <a class="gnb-link" onclick="showPage('makers')">작가 찾기</a>
                <a class="gnb-link" onclick="showPage('dashboard')">내 대시보드</a>
            </div>
        </div>
        
        <div class="detail-content">
            <div class="detail-header">
                <h1 id="detailTitle">픽셀 던전 RPG</h1>
                <div class="meta" id="detailMeta">🎮 RPG · 작가 모집중</div>
                <div class="detail-actions" id="detailActions">
                    <button class="btn-submit" onclick="showApplicationModal()">
                        지원하기
                    </button>
                </div>
            </div>
            
            <div class="detail-tabs">
                <button class="tab-btn active" onclick="switchTab('overview')">개요</button>
                <button class="tab-btn" onclick="switchTab('requirements')">요구사항</button>
                <button class="tab-btn" onclick="switchTab('comments')">댓글</button>
            </div>
            
            <div id="tab-overview" class="detail-section">
                <h3>시나리오 개요</h3>
                <p id="detailDescription">레트로 감성의 로그라이크 던전 탐험 게임입니다.</p>
                
                <h3 style="margin-top: 32px;">필요한 내용</h3>
                <p id="detailRequirements">• 메인 스토리라인<br>• NPC 대화<br>• 아이템 설명</p>
            </div>
            
            <div id="tab-requirements" class="detail-section" style="display: none;">
                <h3>작가 요구사항</h3>
                <div id="requirementsList">
                    <div class="requirement-item">
                        <strong>경력:</strong> <span>경력 무관</span>
                    </div>
                    <div class="requirement-item">
                        <strong>장르 경험:</strong> <span>판타지, RPG</span>
                    </div>
                    <div class="requirement-item">
                        <strong>작업 기간:</strong> <span>3개월</span>
                    </div>
                </div>
            </div>
            
            <div id="tab-comments" class="detail-section" style="display: none;">
                <h3>댓글 <span id="commentCount" style="color: #ff6b6b; font-size: 18px;">(0)</span></h3>
                <div id="commentsList"></div>
                
                <h3 style="margin-top: 32px;">댓글 작성</h3>
                <textarea class="comment-input" id="commentInput" placeholder="댓글을 입력하세요..."></textarea>
                <button class="btn-submit" onclick="addComment()">댓글 등록</button>
            </div>
        </div>
    </div>
    
    <!-- Makers (Writers) Page -->
    <div id="makers" class="page makers-page">
        <div class="gnb">
            <div class="logo" onclick="showPage('landing')">📖 게임 스토리</div>
        </div>
        
        <div class="makers-content">
            <div class="makers-header">
                <div>
                    <h1 id="makersTitle">시나리오 파트너 찾기</h1>
                    <p id="makersSubtitle">원하는 팀원을 검색해보세요.</p>
                </div>
                <div class="maker-search">
                    <input type="text" id="makerSearchInput" placeholder="이름, 소개, 스킬로 검색" onkeypress="if(event.key==='Enter'){searchMakers();}">
                    <button class="search-btn maker-search-btn" onclick="searchMakers()">검색</button>
                </div>
            </div>
            
            <div class="makers-grid">
                <!-- JavaScript로 동적 렌더링 -->
            </div>
        </div>
    </div>
    
    <!-- Dashboard Page -->
    <div id="dashboard" class="page dashboard-page">
        <div class="gnb">
            <div class="logo" onclick="showPage('landing')">📖 게임 스토리</div>
        </div>
        
        <div class="dashboard-content">
            <h1>내 대시보드</h1>
            
            <div class="dashboard-tabs">
                <button class="tab-btn active" onclick="switchDashboardTab('profile')">내 프로필</button>
                <button class="tab-btn" onclick="switchDashboardTab('my-projects')">내 의뢰</button>
                <button class="tab-btn" onclick="switchDashboardTab('applications')"><span id="applicationsTabLabel">받은 지원</span></button>
                <button class="tab-btn" onclick="switchDashboardTab('my-applications')"><span id="myApplicationsTabLabel">넣은 지원</span></button>
                <button class="tab-btn" onclick="switchDashboardTab('portfolio')">포트폴리오</button>
            </div>
            
            <div id="dashboard-profile" class="profile-section">
                <div class="profile-header">
                    <div class="profile-avatar" id="profileAvatar">👤</div>
                    <div class="profile-info">
                        <h2 id="profileName">게스트</h2>
                        <p id="profileBio">프로필을 설정해주세요</p>
                    </div>
                </div>
                
                <button class="btn-submit" onclick="showEditProfileModal()">프로필 수정</button>
            </div>
            
            <div id="dashboard-my-projects" class="profile-section" style="display: none;">
                <h3>내가 올린 시나리오 의뢰</h3>
                <div id="myProjectsList">
                    <div class="empty-state">
                        <div class="icon">📝</div>
                        <h3>아직 등록한 의뢰가 없습니다</h3>
                        <button class="btn-primary" onclick="showPage('create')" style="margin-top: 20px;">의뢰 등록하기</button>
                    </div>
                </div>
            </div>
            
            <div id="dashboard-applications" class="profile-section" style="display: none;">
                <h3 id="applicationsHeading">받은 지원 현황</h3>
                <div id="applicationsList">
                    <div class="empty-state">
                        <div class="icon">📬</div>
                        <h3>아직 받은 지원이 없습니다</h3>
                    </div>
                </div>
            </div>
            
            <div id="dashboard-my-applications" class="profile-section" style="display: none;">
                <h3 id="myApplicationsHeading">넣은 지원 현황</h3>
                <div id="myApplicationsList">
                    <div class="empty-state">
                        <div class="icon">✉️</div>
                        <h3>아직 지원한 프로젝트가 없습니다</h3>
                    </div>
                </div>
            </div>
            
            <div id="dashboard-portfolio" class="profile-section" style="display: none;">
                <h3>내 포트폴리오</h3>
                <button class="btn-submit portfolio-add-btn" onclick="showAddPortfolioModal()">포트폴리오 추가</button>
                <div id="portfolioList">
                    <div class="empty-state">
                        <div class="icon">💼</div>
                        <h3>포트폴리오를 추가해보세요</h3>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Create Project Page -->
    <div id="create" class="page create-page">
        <div class="gnb">
            <div class="logo" onclick="showPage('landing')">📖 게임 스토리</div>
        </div>
        
        <div class="create-content">
            <h1>새 시나리오 의뢰 등록</h1>
            
            <div class="section ai-section">
                <div class="ai-header">
                    <div class="ai-icon">🤖</div>
                    <div>
                        <h3>AI 시나리오 분석</h3>
                        <p>간단한 아이디어만 입력하면 AI가 시나리오 기획을 도와드려요</p>
                    </div>
                </div>
                
                <div class="form-group">
                    <label>게임 아이디어를 자유롭게 적어주세요</label>
                    <div class="form-guide">💡 예: "좀비 아포칼립스 세상에서 살아남는 생존 게임"</div>
                    <textarea id="scenarioInput" rows="6" placeholder="게임 아이디어, 스토리, 컨셉 등을 자유롭게 작성해주세요..."></textarea>
                </div>
                
                <button class="btn-ai" onclick="analyzeScenario()" id="analyzeBtn">
                    <span class="btn-icon">✨</span>
                    AI 분석 시작하기
                </button>
                
                <div id="aiAnalysisResult" class="ai-result" style="display: none;">
                    <div class="ai-thinking" id="aiThinking" style="display: none;">
                        <div class="thinking-animation">
                            <div class="dot"></div>
                            <div class="dot"></div>
                            <div class="dot"></div>
                        </div>
                        <p>AI가 분석 중입니다...</p>
                    </div>
                    
                    <div id="aiQuestions" class="ai-questions" style="display: none;">
                        <h4>🎯 AI 추가 질문</h4>
                        <p class="ai-subtitle">더 구체적인 기획을 위해 몇 가지 질문할게요!</p>
                        <div id="questionsList"></div>
                        
                        <button class="btn-submit" onclick="generateGDD()" style="margin-top: 20px;">
                            최종 기획서 생성하기
                        </button>
                    </div>
                    
                    <div id="finalGDD" class="final-gdd" style="display: none;">
                        <h4>📋 AI 생성 기획서</h4>
                        <div id="gddContent" class="gdd-content"></div>
                        
                        <div class="button-group" style="margin-top: 24px;">
                            <button class="btn-secondary" onclick="resetAI()">다시 작성하기</button>
                            <button class="btn-submit" onclick="useAIResult()">이 내용으로 의뢰 등록</button>
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="divider-section">
                <div class="divider-line"></div>
                <span class="divider-text">또는</span>
                <div class="divider-line"></div>
            </div>
            
            <div class="section">
                <h3>직접 의뢰 작성하기</h3>
                
                <div class="form-group">
                    <label>프로젝트 제목</label>
                    <input type="text" id="projectTitle" placeholder="예: 판타지 RPG 메인 스토리 작성">
                </div>
                
                <div class="form-group">
                    <label>장르</label>
                    <select id="projectGenre">
                        <option value="">장르 선택</option>
                        <option value="RPG">🎮 RPG</option>
                        <option value="비주얼 노벨">📖 비주얼 노벨</option>
                        <option value="퍼즐">🧩 퍼즐/전략</option>
                        <option value="어드벤처">🔦 어드벤처</option>
                        <option value="시뮬레이션">🌾 시뮬레이션</option>
                        <option value="액션">⚔️ 액션</option>
                    </select>
                </div>
                
                <div class="form-group">
                    <label>간단한 설명</label>
                    <textarea id="projectDescription" rows="4" placeholder="어떤 시나리오가 필요한지 간단히 설명해주세요"></textarea>
                </div>
                
                <div class="form-group">
                    <label>상세 요구사항</label>
                    <textarea id="projectRequirements" rows="6" placeholder="• 메인 스토리 라인
• NPC 대사
• 아이템 설명문
• 세계관 설정 등..."></textarea>
                </div>
                
                <div class="form-group">
                    <label>세계관 및 배경 설정</label>
                    <textarea id="projectWorldview" rows="4" placeholder="예: 시대/장소, 세계의 규칙, 핵심 갈등, 플레이어가 마주할 사건의 배경"></textarea>
                </div>
                
                <div class="form-group">
                    <label>주요 캐릭터 및 관계</label>
                    <textarea id="projectCharacters" rows="4" placeholder="예: 주인공/조력자/적대자 소개, 주요 갈등, 캐릭터 성장 방향"></textarea>
                </div>
                
                <div class="form-group">
                    <label>진행 구조 & 플레이 흐름</label>
                    <textarea id="projectStructure" rows="4" placeholder="예: 프롤로그 → 메인 퀘스트 → 전환점 → 클라이맥스 → 엔딩 분기"></textarea>
                </div>
                
                <div class="form-group">
                    <label>톤 & 레퍼런스</label>
                    <textarea id="projectTone" rows="3" placeholder="예: 어둡고 진지한 분위기, 레퍼런스 작품, OST 분위기 등"></textarea>
                </div>
                
                <div class="form-group">
                    <label>키워드 (쉼표로 구분)</label>
                    <input type="text" id="projectKeywords" placeholder="예: 판타지, 중세, 드래곤, 마법">
                </div>
                
                <div class="button-group">
                    <button class="btn-secondary" onclick="showPage('landing')">취소</button>
                    <button class="btn-submit" onclick="submitProject()">의뢰 등록</button>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Login Modal -->
    <div id="loginModal" class="modal">
        <div class="modal-content" onclick="event.stopPropagation()">
            <h3>로그인</h3>
            
            <div class="login-options">
                <button class="naver-login-btn" onclick="naverLogin()">
                    <img src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='%2303C75A'%3E%3Cpath d='M16.273 12.845L7.376 0H0v24h7.726V11.156L16.624 24H24V0h-7.727v12.845z'/%3E%3C/svg%3E" alt="네이버" style="width: 20px; height: 20px; margin-right: 8px;">
                    네이버로 시작하기
                </button>
                
                <div class="divider-section" style="margin: 20px 0;">
                    <div class="divider-line"></div>
                    <span class="divider-text">또는</span>
                    <div class="divider-line"></div>
                </div>
                
                <div class="form-group">
                    <label>이름</label>
                    <input type="text" id="guestName" placeholder="닉네임을 입력하세요">
                </div>
                
                <div class="form-group">
                    <label>역할 선택</label>
                    <div class="role-toggle">
                        <label class="role-option">
                            <input type="radio" name="loginRole" value="producer" checked>
                            <span>제작자</span>
                        </label>
                        <label class="role-option">
                            <input type="radio" name="loginRole" value="writer">
                            <span>작가</span>
                        </label>
                    </div>
                </div>
                
                <button class="btn-submit" onclick="guestLogin()">게스트로 입장</button>
            </div>
            
            <button class="btn-secondary" onclick="closeLoginModal()" style="width: 100%; margin-top: 12px;">취소</button>
        </div>
    </div>
    
    <!-- Application Modal -->
    <div id="applicationModal" class="modal">
        <div class="modal-content" onclick="event.stopPropagation()">
            <h3>시나리오 작가 지원하기</h3>
            
            <div class="form-group">
                <label>자기소개</label>
                <textarea id="applicationMessage" rows="6" placeholder="경력과 작업 스타일을 소개해주세요"></textarea>
            </div>
            
            <div class="form-group">
                <label>포트폴리오 링크 (선택)</label>
                <input type="text" id="applicationPortfolio" placeholder="https://...">
            </div>
            
            <div class="button-group">
                <button class="btn-secondary" onclick="closeApplicationModal()">취소</button>
                <button class="btn-submit" onclick="submitApplication()">지원하기</button>
            </div>
        </div>
    </div>
    
    <!-- Maker Detail Modal -->
    <div id="makerDetailModal" class="maker-detail-modal" onclick="closeMakerDetail()">
        <div class="maker-detail-content" onclick="event.stopPropagation()">
            <div class="maker-detail-header">
                <div class="maker-avatar" id="makerDetailAvatar">✍️</div>
                <div class="maker-detail-info">
                    <h3 id="makerDetailName">작가명</h3>
                    <div class="maker-detail-role" id="makerDetailRole">시나리오 작가</div>
                </div>
            </div>
            
            <div class="maker-detail-section">
                <h4>소개</h4>
                <p id="makerDetailBio">작가 소개</p>
            </div>
            
            <div class="maker-detail-section">
                <h4>전문 분야</h4>
                <div class="maker-skills" id="makerDetailSkills"></div>
            </div>
            
            <div class="maker-detail-section">
                <h4>경력 및 포트폴리오</h4>
                <p id="makerDetailExperience">경력</p>
                <div id="makerDetailPortfolio" class="maker-portfolio"></div>
            </div>
            
            <div class="maker-detail-section">
                <h4>참여 가능 여부</h4>
                <p id="makerDetailAvailability"></p>
            </div>
            
            <button class="contact-btn" onclick="contactMaker()">연락하기</button>
        </div>
    </div>
    
    <!-- Edit Profile Modal -->
    <div id="editProfileModal" class="modal">
        <div class="modal-content" onclick="event.stopPropagation()">
            <h3>프로필 수정</h3>
            
            <div class="form-group">
                <label>이름</label>
                <input type="text" id="editProfileName" placeholder="이름">
            </div>
            
            <div class="form-group">
                <label>소개</label>
                <textarea id="editProfileBio" rows="4" placeholder="자신을 소개해주세요"></textarea>
            </div>
            
            <div class="form-group">
                <label>프로필 이미지 URL</label>
                <input type="text" id="editProfileAvatar" placeholder="https://...">
                <div class="form-guide" style="margin-top: 8px;">비워두면 기본 이미지가 유지됩니다.</div>
            </div>
            
            <div class="button-group">
                <button class="btn-secondary" onclick="closeEditProfileModal()">취소</button>
                <button class="btn-submit" onclick="saveProfile()">저장</button>
            </div>
        </div>
    </div>
    
    <!-- Add Portfolio Modal -->
    <div id="addPortfolioModal" class="modal">
        <div class="modal-content" onclick="event.stopPropagation()">
            <h3>포트폴리오 추가</h3>
            
            <div class="form-group">
                <label>제목</label>
                <input type="text" id="portfolioTitle" placeholder="작품 제목">
            </div>
            
            <div class="form-group">
                <label>설명</label>
                <textarea id="portfolioDescription" rows="4" placeholder="작품 설명"></textarea>
            </div>
            
            <div class="form-group">
                <label>링크</label>
                <input type="text" id="portfolioLink" placeholder="https://...">
            </div>
            
            <div class="button-group">
                <button class="btn-secondary" onclick="closeAddPortfolioModal()">취소</button>
                <button class="btn-submit" onclick="savePortfolio()">추가</button>
            </div>
        </div>
    </div>
    
    <!-- Edit Project Modal -->
    <div id="editProjectModal" class="modal">
        <div class="modal-content" onclick="event.stopPropagation()">
            <h3>의뢰 수정</h3>
            
            <div class="form-group">
                <label>제목</label>
                <input type="text" id="editProjectTitle">
            </div>
            
            <div class="form-group">
                <label>설명</label>
                <textarea id="editProjectDescription" rows="4"></textarea>
            </div>
            
            <div class="button-group">
                <button class="btn-secondary" onclick="closeEditProjectModal()">취소</button>
                <button class="btn-submit" onclick="saveProjectEdit()">저장</button>
            </div>
        </div>
    </div>
    
    <!-- Page Navigation -->
    <div class="page-nav">
        <button class="nav-btn active" onclick="showPage('landing')">메인</button>
        <button class="nav-btn" id="makersNavBtn" onclick="showPage('makers')">팀원</button>
        <button class="nav-btn" onclick="showPage('create')">의뢰하기</button>
        <button class="nav-btn" onclick="showPage('dashboard')">대시보드</button>
    </div>
    
    <script src="script.js"></script>
</body>
</html>
